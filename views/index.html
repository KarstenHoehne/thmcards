<!DOCTYPE html>
<html lang="en">
  <head>
    <title>THMcards</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="author" content="Daniel Knapp, Jan Kammer" />

    <link href='http://fonts.googleapis.com/css?family=Black+Ops+One' rel='stylesheet' type='text/css'>

    <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/img/favicon.ico" type="image/x-icon">

    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="/stylesheets/non-responsive.css" rel="stylesheet" />
    <link href="/stylesheets/bootstrap-wysihtml5.css" rel="stylesheet" />
    <link href="/stylesheets/overrides.css" rel="stylesheet" />

    <!--[if lt IE 9]>
      <script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script>
      <script src="//cdnjs.cloudflare.com/ajax/libs/css3pie/1.0.0/PIE.js"></script>
    <![endif]-->
  </head>

  <body>

    <div id="wrap">
      <div class="container">
    <div class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="#set/list"><img src="/img/cards_logo.png" alt="THMcards Logo" /></a>
        </div>
        <div class="navbar-collapse collapse">
          <ul id="navbar" class="nav navbar-nav">
            <li id="navbar-ownsets"><a href="#set/list">Meine Kartensätze</a></li>
            <li id="navbar-pool"><a href="#pool">Pool</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><input type="text" class="form-control" placeholder="Suche" id="input-search" /></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span id="usr-name"></span> <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="#" id="usr-profile">Mein Profil</a></li>
                <li class="divider"></li>
                <li><a href="/logout" style="color:#D9534F">Logout</a></li>
              </ul>
            </li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>

        <div id="main" class="row">
          <!-- AREA BETWEEN NAVIGATION AND FOOTER -->
        </div>
      </div>
      <div id="push"></div>
    </div>
    <div id="footer">
      <div class="container">
        <p class="muted credit">&copy; 2013 THMcards</p>
      </div>
    </div>


    <script type="text/template" id="pool-category-layout">
      <div class="row">
        <div class="col-md-12">
          <h3 id="pool-category-layout-headline" style="margin-bottom:20px">w</h3>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12" id="pool-category-region"></div>
      </div>
    </script>

    <script type="text/template" id="pool-category-list">

    </script>

    <script type="text/template" id="pool-category-list-item">
      <span class="badge"><%= count %></span> <a href="#pool/<%= name %>"><%= name %></a>
    </script>

    <script type="text/template" id="pool-category-set-list">
      <thead>
        <tr>
          <th>Name</th>
          <th>Beschreibung</th>
          <th>Erstellt von</th>
        </tr>
      </thead>
      <tbody></tbody>
    </script>

    <script type="text/template" id="pool-category-set-list-item">
      <td><a href="#set/details/<%= name.replace(/[^a-zA-Z0-9-_]/g, '_') %>/<%= _id %>/" class="pool-category-set-details-link"><%= name %></a></td>
      <td><%= description %></td>
      <td><a href="#profile/<%= owner %>" class="pool-category-set-owner-link"><%= owner %></a></td>
    </script>

    <!-- LIST LAYOUTS -->
    <script type="text/template" id="set-list-layout">
      <!--div class="row">
        <div class="col-md-9 col-md-offset-3">
          <h3 style="margin-bottom:20px"></h3>
        </div>
      </div-->
      <div class="row">
        <div class="col-md-3" id="set-list-sideBar-region"></div>
        <div class="col-md-9" id="set-list-region"></div>
      </div>
    </script>

    <script type="text/template" id="set-details-layout">
      <!--div class="row">
        <div class="col-md-9 col-md-offset-3">
          <h3 style="margin-bottom:20px">&nbsp;</h3>
        </div>
      </div-->
      <div class="row">
        <div class="col-md-3">
          <div id="set-details-sideBar-region"></div>
          <div id="set-details-rating-region"></div>
          <div id="set-details-controls-region"></div>
        </div>
        <div class="col-md-9" id="set-details-region"></div>
      </div>
    </script>

    <script type="text/template" id="set-details-newcard-layout">
      <div class="col-md-12">
        <h3 style="margin-bottom:20px">Neue Karte</h3>
      </div>
      <div class="col-md-12" id="set-newcard-region"></div>
    </script> 

    <script type="text/template" id="set-details-editcard-layout">
      <div class="col-md-12">
        <h3 style="margin-bottom:20px">Karte bearbeiten</h3>
      </div>
      <div class="col-md-12" id="set-editcard-region"></div>
    </script>       

    <script type="text/template" id="set-details-item">
      <div class="box" data-id="<%= _id %>">
        <span class="clicktoflip">Click to flip</span>
        <img class="cardside cardfront-symbol" src="/img/icon_front.png" />
        <img class="cardside cardback-symbol" src="/img/icon_back.png" style="display:none"/>
        <a class="btn-editCard btn btn-default btn-xs" href="#editCard">
          <i class="glyphicon glyphicon-pencil"></i>
        </a>
        <a class="btn-showPictureModal btn btn-default btn-xs" href="#showPictureModal" style="display:none">
          <i class="glyphicon glyphicon-picture"></i>
          <small>Bild anzeigen</small>
        </a>
        <div class="block"><div class="cardContent centered front active"><%= front.text %></div><div class="cardContent centered back" style="display:none"><%= back.text %></div>
      </div>
    </script>

    <script type="text/template" id="set-details-list">
        <div class="listhead">
          <thead>
            <tr>
              <th width="45%">Vorderseite</th>
              <th width="45%">Rückseite</th>
              <th width="10%">Optionen</th>
            </tr>
          </thead>
          <tbody></tbody>
        </div>

        <div class="modal fade" id="pictureModalList" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">&nbsp;</h4>
            </div>
            <div class="modal-body" id="setdetails-pictureModalList-body">


            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->
    </script>  

    <script type="text/template" id="set-details-listitem">
        <td>
          <span style="font-family:'Georgia'"><%= front.text %></span>
          <% if(front.picture) { %>
            <a class="card-front btn-showPictureModalList" data-id="<%= _id %>" href="#showPictureModalList" >
              <i class="glyphicon glyphicon-picture"></i>
            </a>
          <% } %>
        </td>
        <td>
          <span style="font-family:'Georgia'"><%= back.text %></span>
          <% if(back.picture) { %>
            <a class="card-back btn-showPictureModalList" data-id="<%= _id %>" href="#showPictureModalList" >
              <i class="glyphicon glyphicon-picture"></i>
            </a>
          <% } %>
        </td>
        <td>
          <a class="btn btn-xs btn-default btn-listEditCard" data-id="<%= _id %>" href="#editCard" style="margin-left:5px">
            <i class="glyphicon glyphicon-pencil"></i>
          </a>
          <a class="btn btn-xs btn-default btn-listDeleteCard" data-id="<%= _id %>" href="#deleteCard">
            <i class="glyphicon glyphicon-ban-circle"></i>
          </a>
        </td>
    </script>

    <script type="text/template" id="set-details-listitem-empty">
        <td colspan="3" align="center">
          <span style="font-family:'Georgia'">Keine Karten vorhanden</span>
        </td>
    </script>

    <script type="text/template" id="set-details-item-empty">
      <div class="box">
        <div class="block"><div class="centered front" style="font-size:2em">Keine Karten vorhanden</div>
      </div>
    </script>

    <script type="text/template" id="set-details-collection">
      <div id="cardCarousel" class="carousel slide">
        <div class="carousel-indicators">
          <small class="text-muted card-indicator"> </small>
        </div>
        <div class="carousel-inner"></div>
        
        <a class="left carousel-control" href="#cardCarousel">
          <span class="icon-prev"></span>
        </a>
        <a class="right carousel-control" href="#cardCarousel">
          <span class="icon-next"></span>
        </a>
      </div>


      <div class="modal fade" id="pictureModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">&nbsp;</h4>
            </div>
            <div class="modal-body" id="setdetails-pictureModal-body">


            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->


      <div class="row">
        <div class="col-md-12"><h4>&nbsp</h4></div>
      </div>
      <div class="row">
        <div class="col-md-6">
          <div class="well well-sm setWell">
            <h4>Lernen</h4>
            <hr />
              
            <hr />
            <button class="btn btn-default learn btn-block">Lernkartei</button>
            <button class="btn btn-default memo btn-block" style="margin-top:10px;">Memo</button>
          </div>
        </div>
        <div class="col-md-6">
          <div class="well well-sm setWell">
            <h4>Meteor</h4>
            <hr />
            <div class="meteorBox"><span>Dein Highscore:</span><span class="pull-right"><span id="meteor-set-points">0</span> Punkte</span></div>
            
            <button class="btn btn-primary play-meteor btn-block">Spielen</button>
          </div>
        </div>
      </div>
    </script>

    <script type="text/template" id="set-list-item">
      <td>
        <% if(cardCnt > 0) { %><span class="badge pull-right"><%= cardCnt %></span><% } %>
        <a href="#set/details/<%= name.replace(/[^a-zA-Z0-9-_]/g, '_') %>/<%= _id %>/"><%= name %></a>
      </td>
      <td><%= category %></td>
      <td><%= description %></td>
    </script>

    <script type="text/template" id="set-details-newcard"> 
      <table class="table table-bordered">
        <tbody>
          <tr>
            <td class="cardtext fronttext">
              <input class="form-control fronttext" id="front-textarea" placeholder="Vorderseite" style="width:440px; height:200px; margin:10px auto 0">
              </input>
              <span class="help-block fronttext"></span>
              <small class="text-muted pull-right" style="margin-left:3px">/ 120 Zeichen</small> <small class="text-muted pull-right char-cnt">0</small>
            </td> 
            <td class="cardtext backtext">
              <input class="form-control backtext" id="back-textarea" placeholder="Rückseite" style="width:440px; height:200px; margin:10px auto 0">
              </input>
              <span class="help-block backtext"></span>
              <small class="text-muted pull-right" style="margin-left:3px">/ 120 Zeichen</small> <small class="text-muted pull-right char-cnt">0</small>
            </td> 
          </tr>
          <tr>
            <td>
              <div class="input-append">
                <div class="input-group">
                <input class="span4 form-control pull-left front" style="" id="set-details-newcard-input-pic-front-search" type="text" placeholder="Link oder Suchbegriff eingeben">
                  <span class="input-group-btn"><button class="btn btn-pictureSearch btn-default btn-info" type="button" id="set-details-newcard-btn-pic-front-seach">Bildsuche</button></span>
                </div>
              </div>
            </td>
            <td>
              <div class="input-append">
                <div class="input-group">
                <input class="span4 form-control pull-left back" id="set-details-newcard-input-pic-back-search" type="text" placeholder="Link oder Suchbegriff eingeben">
                <span class="input-group-btn">
                <button class="btn btn-pictureSearch btn-default btn-info" type="button" id="set-details-newcard-btn-pic-back-seach">Bildsuche</button>
                </span>
              </div>
            </td>
          </tr>
          <tr>
            <td colspan="2"><div style="margin:20px auto; width:412px"><button class="btn btn-default btn-large cancel" style="width:200px">Abbrechen</button>&nbsp;&nbsp;&nbsp;<button style="width:200px" class="btn btn-success btn-large save" data-loading-text="Speichere Karte...">Karte speichern</button></div></td>
          </tr>
        </tbody>
      </table>

      <div id="pictureSearchModal" class="modal fade pictureSearchModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">Bild einfügen</h4>
            </div>
            <div class="modal-body" id="pictureSearchModal-body">

            </div>
            <div class="modal-footer" id="pictureSearchModal-footer">
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->
    </script>

    <script type="text/template" id="set-details-editcard"> 
      <table class="table table-bordered">
        <tbody>
          <tr>
            <td class="cardtext fronttext">
              <input class="form-control fronttext" id="editcard-front-textarea" placeholder="Vorderseite" type="text" style="width:440px; height:200px; margin:10px auto 0">
              </input>
              <span class="help-block fronttext"></span>
              <small class="text-muted pull-right" style="margin-left:3px">/ 120 Zeichen</small> <small class="text-muted pull-right char-cnt"><%= front.text_plain.length %></small>
            </td> 
            <td class="cardtext backtext">
              <input class="form-control backtext" id="editcard-back-textarea" placeholder="Rückseite" type="text" style="width:440px; height:200px; margin:10px auto 0;">
              </input>
              <span class="help-block backtext"></span>
              <small class="text-muted pull-right" style="margin-left:3px">/ 120 Zeichen</small> <small class="text-muted pull-right char-cnt"><%= back.text_plain.length %></small>
            </td> 
          </tr>
          <tr>
            <td>
              <div class="input-append">
                <div class="input-group">
                <input class="span4 form-control pull-left" style="" id="set-details-editcard-input-pic-front-search" type="text" placeholder="Link oder Suchbegriff eingeben">
                  <span class="input-group-btn"><button class="btn btn-pictureSearch btn-default btn-info" type="button" id="set-details-editcard-btn-pic-front-seach">Bildsuche</button></span>
                </div>
              </div>
            </td>
            <td>
              <div class="input-append">
                <div class="input-group">
                <input class="span4 form-control pull-left" id="set-details-editcard-input-pic-back-search" type="text" placeholder="Link oder Suchbegriff eingeben">
                <span class="input-group-btn">
                <button class="btn btn-pictureSearch btn-default btn-info" type="button" id="set-details-editcard-btn-pic-back-seach">Bildsuche</button>
                </span>
              </div>
            </td>
          </tr>
          <tr>
            <td colspan="2">
              <a style="width:150px" class="btn btn-danger btn-large btn-card-delete pull-left">Karte löschen</a>
              <div class="pull-right">
                <button style="width:150px" class="btn btn-default btn-large cancel">Abbrechen</button>
                <button style="width:150px" class="btn btn-primary btn-large save" data-loading-text="Speichere Karte...">Karte speichern</button>
              </div
            </td>
          </tr>
        </tbody>
      </table>

      <div id="editcard-pictureSearchModal" class="modal fade pictureSearchModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">Bild einfügen</h4>
            </div>
            <div class="modal-body" id="editcard-pictureSearchModal-body">

            </div>
            <div class="modal-footer" id="editcard-pictureSearchModal-footer">
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->

    </script>

    <script type="text/template" id="set-details-sideBar"> 
      <h4 style="margin:0"><%= name %></h4>
      <hr />
      <span style="font-family:'Georgia'; font-style:italic"><%= description %></span>
      <hr />
      <span class="nav-header" style="padding-left:0">Erstellt von</span>
      <span style="font-family:'Georgia'"><a href="/#profile/<%=owner%>"><%= owner %></a> am <%= new Date(created).format('d.m.y') %></span>
      <hr />
      <span class="nav-header" style="padding-left:0; margin-bottom:3px">Ansicht wechseln</span>
      <div class="btn-group btn-group-xs btn-group-justified">
        <a id="btnToCardLayout" class="btn btn-default btn-cardLayout">Karte</a>
        <a id="btnToListLayout" class="btn btn-default btn-listLayout">Liste</a>
      </div>
      <hr />
    </script>

    <script type="text/template" id="set-details-rating">
      <span class="nav-header" style="padding-left:0;">Bewertung</span>
      <div  style="text-align:center">
        <span id="raty" data-score="<%= avgValutation %>" style="display:inline-block"></span>
        <span style="display:inline-block;font-size:11px" class="text-muted">Ø <%= _.str.numberFormat(avgValutation, 1, ',', '.') %> Sterne bei <a href="#set/rating/<%= setId %>" class="show-rating"><%= _.str.numberFormat(totalValutations, 0, ',', '.') %> Bewertungen</a></span>
      </div>

      <div class="modal fade" id="ratingModal" tabindex="-1" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">"<span class="rating-title">Kartensatz</span>" bewerten</h4>
            </div>
            <div class="modal-body">
              <div class="form-horizontal">
                <div class="form-group setdetails name">
                  <label class="col-md-3 control-label">Sterne</label>
                  <div class="col-md-9">
                    <div id="ratingStars"></div>
                  </div>                  
                </div>
                <div class="form-group rateset description">
                  <label class="col-md-3 control-label" for="setRatingComment">Bewertung</label>
                  <div class="col-md-9">
                    <textarea class="form-control" rows="3" id="setRatingComment" placeholder="Mindestens 60 Zeichen"></textarea>
                    <span class="help-block description"></span>
                    <small class="text-muted pull-right" style="margin-left:3px">Zeichen</small> <small class="text-muted pull-right char-cnt">0</small><small class="pull-left text-muted">mindestens 60 Zeichen</small>
                  </div>                  
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Abbrechen</button>
              <button type="button" class="btn btn-primary" disabled="disabled">Kartensatz bewerten</button>
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->



    </script>

    <script type="text/template" id="set-details-controls">
      <button class="btn btn-primary newCard" id="set-details-controls-btn-newCard" style="width:100%">Neue Karte erstellen</button>
      <button class="btn btn-default editSet" style="width:100%; margin-top:10px">Kartensatz editieren</button>

      <div class="modal fade" id="editSetModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">Kartensatz editieren</h4>
            </div>
            <div class="modal-body">
              <div class="form-horizontal">
                <div class="form-group setdetails name">
                  <label class="col-md-3 control-label" for="editSetName">Name</label>
                  <div class="col-md-9">
                    <input class="form-control" type="text" id="editSetName">
                    <span class="help-block name"></span>
                  </div>
                </div>
                <div class="form-group setdetails description">
                  <label class="col-md-3 control-label" for="editSetDescription">Beschreibung</label>
                  <div class="col-md-9">
                    <textarea class="form-control" rows="3" id="editSetDescription"></textarea>
                    <span class="help-block description"></span>
                  </div>                 
                </div>
                <div class="form-group setdetails category">
                  <label class="col-md-3 control-label" for="editSetCategory">Kategorie</label>
                  <div class="col-md-9">
                    <input class="form-control" type="text" id="editSetCategory">
                    <span class="help-block category"></span>
                  </div>                  
                </div>
                <div class="form-group">
                  <label class="col-md-3 control-label" for="editSetDescription">Sichtbar für</label>
                  <div class="controls col-md-9">
                    <div class="btn-group" data-toggle="buttons">
                      <label class="btn private btn-default active" style="width:100px">
                        <input type="radio" name="options" value="private" id="edit_visibility_private"> mich
                      </label>
                      <label class="btn public btn-default" style="width:100px">
                        <input type="radio" name="options" value="public" id="edit_visibility_public"> alle
                      </label>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-md-3 control-label" for="newSetDescription">Bewertungen</label>
                  <div class="controls col-md-9">
                    <div class="btn-group btn-group-rating" data-toggle="buttons">
                      <label class="btn rating-true btn-default active" style="width:100px">
                        <input type="radio" name="rating" value="true" id="rating_true"> erlauben
                      </label>
                      <label class="btn rating-false btn-default" style="width:100px">
                        <input type="radio" name="rating" value="false" id="rating_false"> abschalten
                      </label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button class="btn btn-default" data-dismiss="modal" aria-hidden="true">Abbrechen</button>
              <button class="btn btn-danger pull-left btn-setDelete" style="width:150px" data-loading-text="Lösche Deck...">Kartensatz löschen</button>
              <button class="btn btn-primary" data-loading-text="Speichere Deck...">Kartensatz speichern</button>
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->
    </script>

    <script type="text/template" id="set-list-sideBar">
      <div class="input-group">
        <input class="form-control" type="text" id="new-set-input" placeholder="Neuer Kartensatz" />
        <span class="input-group-btn">
          <button class="btn btn-primary saveSet" type="button"><i class="glyphicon glyphicon-plus"></i></button>
        </span>
      </div>

      <hr />
      <ul class="nav nav-list">
        <li class="nav-header">Kategorie</li>
        <li class="active"><a href="#set/list/created" name="set-created">Erstellt</a></li>
        <li><a href="#set/list/created" name="set-learned">Gelernt</a></li>
      </ul>
      <div class="modal fade" id="newSetModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">Neuen Kartensatz anlegen</h4>
            </div>
            <div class="modal-body">
              <div class="form-horizontal">
                <div class="form-group setdetails name">
                  <label class="col-md-3 control-label" for="newSetName">Name</label>
                  <div class="col-md-9">
                    <input class="form-control" type="text" id="newSetName" placeholder="Name">
                    <span class="help-block name"></span>
                  </div>                  
                </div>
                <div class="form-group setdetails description">
                  <label class="col-md-3 control-label" for="newSetDescription">Beschreibung</label>
                  <div class="col-md-9">
                    <textarea class="form-control" rows="3" id="newSetDescription" placeholder="Beschreibung"></textarea>
                    <span class="help-block description"></span>
                  </div>                  
                </div>
                <div class="form-group setdetails category">
                  <label class="col-md-3 control-label" for="newSetCategory">Kategorie</label>
                  <div class="col-md-9">
                    <input class="form-control" type="text" id="newSetCategory" placeholder="Informatik, Jura, Wirtschaft, ...">
                    <span class="help-block category"></span>
                  </div>                 
                </div>
                <div class="form-group">
                  <label class="col-md-3 control-label" for="newSetDescription">Sichtbar für</label>
                  <div class="controls col-md-9">
                    <div class="btn-group" data-toggle="buttons">
                      <label class="btn btn-default active" style="width:100px">
                        <input type="radio" name="options" value="private" id="visibility_private"> mich
                      </label>
                      <label class="btn btn-default" style="width:100px">
                        <input type="radio" name="options" value="public" id="visibility_public"> alle
                      </label>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-md-3 control-label" for="newSetDescription">Bewertungen</label>
                  <div class="controls col-md-9">
                    <div class="btn-group btn-group-rating" data-toggle="buttons">
                      <label class="btn btn-default active" style="width:100px">
                        <input type="radio" name="rating" value="true" id="rating_true"> erlauben
                      </label>
                      <label class="btn btn-default" style="width:100px">
                        <input type="radio" name="rating" value="false" id="rating_false"> abschalten
                      </label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button class="btn btn-default" data-dismiss="modal" aria-hidden="true">Abbrechen</button>
              <button class="btn btn-primary" data-loading-text="Speichere Deck...">Kartensatz anlegen</button>
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->

    </script>

    <script type="text/template" id="set-list">
      <thead>
        <tr>
          <th>Name</th>
          <th width="25%">Kategorie</th>
          <th width="40%">Beschreibung</th>
        </tr>
      </thead>
      <tbody></tbody>
    </script>

    <script type="text/template" id="set-list-empty">
          <td class="emptyCellList" colspan="3" align="center" height="60">
            <span class="emptyTextList">Du hast noch keinen Kartensatz angelegt</span>
            <br />
            <a class="btn-newSet btn btn-primary btn-s">
              <span>Kartensatz anlegen</span>
            </a>
          </td>
    </script> 

    <script type="text/template" id="set-rating-list">
      <thead>
        <tr>
          <th width="30%">Name</th>
          <th width="10%">Bewertung</th>
          <th width="60%">Kommentar</th>
        </tr>
      </thead>
      <tbody></tbody>
    </script>

    <script type="text/template" id="set-rating-item">
      <td><a href="#profile/<%= owner %>" class="profile-link"><%= owner %></a></td><td><div class="rating" data-score="<%= value %>"></div></td><td><%= comment %></td>
    </script>

    <script type="text/template" id="set-rating-item-empty">
      <td colspan="3" align="center"><p class="text-muted" style="margin-top:8px"><em>Keine Bewertungen vorhanden</em></p></td>
    </script>

    <script type="text/template" id="set-rating-sideBar"> 
      <h4 style="margin:0"><%= name %></h4>
      <hr />
      <span style="font-family:'Georgia'; font-style:italic"><%= description %></span>
      <hr />
      <span class="nav-header" style="padding-left:0">Erstellt von</span>
      <span style="font-family:'Georgia'"><a href="/#profile/<%=owner%>"><%= owner %></a> am <%= new Date(created).format('d.m.y') %></span>
      <hr />
      <a href="#" class="back-to-set btn btn-default btn-block btn-primary">Zurück zum Kartensatz</a>  
    </script>    

    <script type="text/template" id="game-meteor-layout">
      <div class="row">
        <div class="col-md-12">
          <div id="game-meteor-pitch-region"></div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div id="game-meteor-sideBar-region"></div>
        </div>
      </div>
    </script>

    <script type="text/template" id="game-meteor-sideBar">
      <div class="row">

      </div>
    </script>

    <script type="text/template" id="game-meteor-pitch">
      <div id="meteor-pitch">
        <div id="meteor-countdown">
          <div id="meteor-countdown-welcome">
            <div class="meteor-countdown-back">&nbsp;</div>
            <div class="meteor-welcome-front">  
              <span>Meteor</span>
              <div class="meteor-welcome-description">Zerstöre die Meteoriten bevor sie die Erde erreichen! Jeder Meteorit ist mit einer Seite deiner Lernkarten beschriftet - zerstöre ihn durch korrekte Eingabe der Rückseite!</div>
              <div><a href="#" class="btn btn-primary btn-lg">Start</a></div>
            </div>
          </div>
          <span id="meteor-countdown-counter" style="padding-top:150px; display:block"></span>
        </div>
        <div id="meteor-statistics" style="display:none">
          <div id="meteor-lifes"><span class="glyphicon glyphicon-heart"></span><span class="glyphicon glyphicon-heart"></span><span class="glyphicon glyphicon-heart"></span></div>
          <div id="meteor-level">Level <span id="meteor-level-cnt">1</span></div>
          <div id="meteor-points">0</div>
        </div>
      </div>
      <div style="margin:20px 0">
        <input type="input" class="form-control meteor-answer" disabled="disabled" placeholder="Lösung eingeben" />
      </div>
      <div class="playcardcontainer" style="display: none"></div>
      
      <a href="#" class="btn btn-default btn-danger pull-right">Stop</a>
      <a href="#" class="btn btn-default btn-info pull-right">Resume</a>
      <input type="text" class="form-control" id="itemcnt" placeholder="3" />
      <input type="text" class="form-control" id="itemspeed" placeholder="1000" />


      
      <div class="modal fade" id="meteor-answer-modal">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title">Lösung eingeben</h4>
            </div>
            <div class="modal-body">
              <div class="panel panel-info">
                <div class="panel-heading">Frage</div>
                <div class="panel-body">
                  <p id="meteor-answer-modal-front"></p>
                </div>
              </div>

              <div class="panel panel-success">
                <div class="panel-heading">Korrekte Antwort</div>
                <div class="panel-body">
                  <p id="meteor-answer-modal-back"></p>
                </div>
              </div>
              <input type="text" placeholder="Korrekte Antwort eingeben" class="form-control" id="meteor-answer-modal-input" />
            </div>
            <div class="modal-footer">
              
              <button type="button" class="btn btn-success" disabled="disabled">Lösen</button>
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->


      <div class="modal fade" id="meteor-gameover-modal">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title">Game Over</h4>
            </div>
            <div class="modal-body">
              <div class="alert alert-info" style="text-align:center">Du hast <strong>400</strong> <strong>Punkte</strong> erzielt!</div>

              <div class="panel panel-success" style="display:none">

                <div class="panel-heading">Highscores</div>

                <table class="table">
                  <thead>
                    <th>Spieler</th><th>Punkte</th>
                  </thead>
                  <tbody>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default back">Zurück</button>
              <button type="button" class="btn btn-success newGame">Neues Spiel</button>

            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->      


    </script>

    <script type="text/template" id="game-meteor-playcard">
      <span data-answer="<%= back.text_plain.toLowerCase() %>" data-cardid="<%= _id %>"><%= front.text_plain %></span>
    </script>

    <!--Learn -->
    <script type="text/template" id="set-learn-layout">
      <div class="row">
        <div class="col-md-3">
          <div id="set-learn-sideBar-region"></div>
          <div id="set-learn-controls-region"></div>
        </div>
        <div class="col-md-9">
          <div id="set-learn-region"></div>
        </div>
      </div>
    </script>

    <script type="text/template" id="set-learn-sideBar"> 
      <h4 style="margin:0"><%= name %></h4>
      <hr />
      <span style="font-family:'Georgia'; font-style:italic"><%= description %></span>
      <hr />
      <span class="nav-header" style="padding-left:0">Erstellt von</span>
      <span style="font-family:'Georgia'"><a href="/#user/<%=owner%>"><%= owner %></a> am <%= new Date(created).format('d.m.y') %></span>
    </script>

    <script type="text/template" id="set-learn-controls">
      <button class="btn btn-default learn-box" title="1" style="width:100%;">Fach 1</button>
      <button class="btn btn-default learn-box" title="2" style="width:100%; margin-top:10px">Fach 2</button>
      <button class="btn btn-default learn-box" title="3" style="width:100%; margin-top:10px">Fach 3</button>
      <button class="btn btn-default learn-box" title="4" style="width:100%; margin-top:10px">Fach 4</button>
      <button class="btn btn-default learn-box" title="5" style="width:100%; margin-top:10px">Fach 5</button>
    </script>


    <script type="text/template" id="set-learn-collection">
      <div id="cardCarousel" class="carousel slide" style="display:none">
        <div class="carousel-indicators">
          <small class="text-muted card-indicator"></small>
        </div>
        <div class="carousel-inner"></div>
      </div>

      <div id="learn-navigation">
            <button class="btn btn-primary answer card-success" title="success" style="width:100%; margin-top:10px; display:none">Gewusst</button>
            <button class="btn btn-default answer card-fail" title="failed" style="width:100%; margin-top:10px; display:none">Nicht gewusst</button>
      </div>

      <div class="box learn-endscreen" style="display:none">
        <div class="block">
          <div class="centered front" style="font-size:2em">
                Lerneinheit erfolgreich beendet
          </div>
          <div class="centered front" style="font-size:1.2em; width:500px">
                Wähle ein weiteres Fach oder gehe zurück zur Hauptseite</div>
          </div>
        </div>
      </div>

      <div class="box learn-startscreen">
        <div class="block">
          <div class="centered front" style="font-size:2em">
                Wähle ein Fach auf der linken Seite
          </div>
          <div class="centered front" style="font-size:1.2em">
                Mehr Infos</div>
          </div>
        </div>
      </div>

      <div class="learn-cardHelptext" style="display:none">
            <span>Klicke auf die Karte um Sie zu drehen</span>
      </div>

      <div class="modal fade" id="pictureModalLearn" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">&nbsp;</h4>
            </div>
            <div class="modal-body" id="setdetails-pictureModal-body"></div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->
    </script>

    <script type="text/template" id="set-learn-item">
      <div class="box" data-id="<%= _id %>">
        <span class="clicktoflip">Click to flip</span>
        <img class="cardside cardfront-symbol" src="/img/icon_front.png" />
        <img class="cardside cardback-symbol" src="/img/icon_back.png" style="display:none"/>
        <a class="btn-showPictureModal btn btn-default btn-xs" href="#showPictureModal" style="display:none">
          <i class="glyphicon glyphicon-picture"></i>
          <small>Bild anzeigen</small>
        </a>
        <div class="block"><div class="cardContent centered front active"><%= front.text %></div><div class="cardContent centered back" style="display:none"><%= back.text %></div>
      </div>
    </script>

    <script type="text/template" id="set-learn-item-empty">
      <div class="box">
        <div class="block"><div class="centered front" style="font-size:2em">Keine Karten vorhanden</div>
      </div>
    </script> 

    <!--Memo -->
    <script type="text/template" id="set-memo-layout">
      <div class="row">
        <div class="col-md-12">
          <div id="set-memo-region"></div>
        </div>
      </div>
    </script>


    <script type="text/template" id="set-memo-collection">
      <div id="cardCarousel" class="carousel slide">
        <ol class="carousel-indicators"></ol>
        <div class="carousel-inner"></div>     
        <button class="btn btn-primary answer show-answer" title="success">Zeige Antwort</button>
        <div class="rating-controls" style="display:none">
          <div class="btn-toolbar memo-toolbar">
            <div class="memo-cardHelptext">
              <span>Bewerte deine Antwort</span>
            </div>
            <div class="btn-group memo-rating">
              <button class="btn btn-default rate-answer wrong" data-placement="bottom" data-id="0" title="Blackout">0</button>
              <button class="btn btn-default rate-answer wrong" data-placement="bottom" data-id="1" title="Falsche Antwort, aber an die Richtige erinnert">1</button>
              <button class="btn btn-default rate-answer" data-placement="bottom" data-id="2" title="Falsche Antwort, aber leicht an die Richtige erinnert">2</button>
              <button class="btn btn-default rate-answer" data-placement="bottom" data-id="3" title="Richtige Antwort nach längerem Überlegen">3</button>
              <button class="btn btn-default rate-answer" data-placement="bottom" data-id="4" title="Richtige Antwort nach kurzem Zögern">4</button>
              <button class="btn btn-default rate-answer" data-placement="bottom" data-id="5" title="Perfekte Antwort">5</button>
              <a class="btn btn-default btn-info memo-helptext" data-placement="bottom" title="Memo" data-content="soon...">
                <i class="glyphicon glyphicon-question-sign"></i>
              </a>
            </div>
          </div>
        </div>
      </div>

      <div class="memo-endscreen" style="display:none">
        <div class="row twosided">
          <div class="col-md-6">
            <div class="box">
              <div class="block memocontent-block"><div class="double">Lerneinheit erfolgreich beendet</div>
                <br />
                <a class="btn-back btn btn-default btn-s" onclick="history.go(-1)">
                  <span>Zurück zum Kartensatz</span>
                </a>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="box">
              <div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="modal fade" id="pictureModalMemo" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">&nbsp;</h4>
            </div>
            <div class="modal-body" id="setdetails-pictureModal-body"></div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->


    </script>

    <script type="text/template" id="set-memo-item">
    <div class="row twosided" data-id="<%= _id %>">
      <div class="col-md-6">
        <div class="box">
          <span class="clicktoflip">Vorderseite</span>
          <img class="cardside cardfront-symbol" src="/img/icon_front.png" />
          <a class="cardcontent-front btn-showPictureModal btn btn-default btn-xs" href="#showPictureModalMemo" style="display:none">
            <i class="glyphicon glyphicon-picture"></i>
            <small>Bild anzeigen</small>
          </a>
          <div class="block memocontent-block"><div class="double cardcontent-front"><%= front.text %></div></div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="box">
          <span class="clicktoflip">Rückseite</span>
          <img class="cardside cardback-symbol memoback" src="/img/icon_back.png" />
          <a class="cardcontent-back btn-showPictureModal btn btn-default btn-xs" href="#showPictureModalMemo" style="display:none">
            <i class="glyphicon glyphicon-picture"></i>
            <small>Bild anzeigen</small>
          </a>
          <div class="block memocontent-block"><div class="double cardcontent-back" style="display:none"><%= back.text %></div></div>
        </div>
      </div>
    </div>
    </script>


    <script type="text/template" id="set-memo-item-empty">
        <div class="row twosided">
          <div class="col-md-6">
            <div class="box">
              <div class="block memocontent-block"><div class="double">Aktuell keine nach Lernplan zu lernenden Karten</div>
                <br />
                <a class="btn-back btn btn-default btn-s" onclick="history.go(-1)">
                  <span>Zurück zum Kartensatz</span>
                </a>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="box">
              <div>
              </div>
            </div>
          </div>
        </div>
    </script> 

    <script type="text/template" id="profile-layout">
      <div class="row">
        <div class="col-md-12">
          <h3 style="margin-bottom:20px">Profil von <span id="profileName"></span></h3>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6" id="profile-info-region"></div>
        <div class="col-md-6" id="profile-xp-region"></div>
      </div>

      <div class="row">
        <div class="col-md-12" id="profile-badge-region"></div>
      </div>

      <div class="row">
        <div class="col-md-12" id="profile-score-region"></div>
      </div>

      <div class="row">
        <div class="col-md-12" id="profile-set-region"></div>
      </div>
    </script>

    <script type="text/template" id="profile-xp-item">
      <div class="panel-heading">
        <h3 class="panel-title">Erfahrungspunkte (XP)</h3>
      </div>
      <div class="panel-body">
        <div class="row" style="margin-bottom:15px">
          <div class="col-md-3">
            <div class="well well-sm" style="margin:0; text-align:center">
              <div class="row"><span style="display:inline-block; height:50px; font-size:40px"><%= _.str.numberFormat(totalXPoints, 0, ',', '.') %></span></div>
              <div class="row"><span class="text-muted" style="font-size:12px">Total</span></div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="well well-sm" style="margin:0; text-align:center">
              <div class="row" style="height:50px;"><span style="display:inline-block; font-size:30px; margin-top:12px"><%= _.str.numberFormat(todayXPoints, 0, ',', '.') %></span></div>
              <div class="row"><span class="text-muted" style="font-size:12px">Heute</span></div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="well well-sm" style="margin:0; text-align:center">
              <div class="row" style="height:50px;"><span style="display:inline-block; font-size:25px; margin-top:17px; height:25px;"><%= _.str.numberFormat(yesterdayXPoints, 0, ',', '.') %></span></div>
              <div class="row"><span class="text-muted" style="font-size:12px">Gestern</span></div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="well well-sm" style="margin:0; text-align:center">
              <div class="row" style="height:50px;"><span style="display:inline-block; font-size:20px; margin-top:22px; height:20px"><%= _.str.numberFormat(lastSevenDaysXPoints, 0, ',', '.') %></span></div>
              <div class="row"><span class="text-muted" style="font-size:12px">7 Tage</span></div>
            </div>
          </div>
        </div>
        <% if(lastRedeem) { %>
        <div class="row" style="margin-bottom:15px">
          <div class="col-md-12">
            <span class="text-muted">Zuletzt für: </span> <span class="pull-right text-muted"><%= lastRedeem.name %> (+<%= lastRedeem.value %>)</span>
          </div>
        </div>
        <hr />
        <% } %>
        <div class="row" style="margin-top:15px">
          <div class="col-md-2" style="text-align:center;">
            <div style=" width:36px; height:36px; background-image:url('/img/trophy_36x36.png')"><span style="font-weight:bold; color: #000; font-size:13px; padding-top:5px; display:inline-block"><%= currentLevel %></span></div>
          </div>
          <div class="col-md-8" style="text-align:center">
            <div class="progress" style="margin:0">
              <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: <%= pointsLevel-pointsRemaining %>0%;">
                <span class="sr-only"><%= pointsLevel-pointsRemaining %>0% Complete</span>
              </div>
            </div>
            <small class="text-muted">Noch <em><%= _.str.numberFormat(pointsRemaining, 0, ',', '.') %> Punkte</em> bis zum nächsten Level</small>
          </div>
          <div class="col-md-2" style="text-align:center;">
            <div style=" width:36px; height:36px; background-image:url('/img/trophy_36x36_gray.png')"><span style="font-weight:bold; color: #fff; font-size:13px; padding-top:5px; display:inline-block"><%= currentLevel+1 %></span></div>
          </div>
        </div>
      </div>    
      
    </script>

    <script type="text/template" id="profile-info-item">
      <div class="panel-heading">
        <h3 class="panel-title">Hallo!</h3>
      </div>
      <div class="panel-body">
        <form class="form-horizontal" role="form">
          <div class="form-group">
            <label class="col-md-4 control-label">Benutzername</label>
            <div class="col-md-8">
              <p class="form-control-static"><%= username %></p>
            </div>
          </div>
          <div class="form-group">
            <label class="col-md-4 control-label">Angemeldet via</label>
            <div class="col-md-8">
              <p class="form-control-static"><%= _.str.capitalize(provider) %></p>
            </div>
          </div>
        </form>
      </div>
    </script>

    <script type="text/template" id="profile-score-item">
      <div class="panel-heading">
        <h3 class="panel-title">Meteor Statistiken</h3>
      </div>
      <div class="panel-body">
        <form class="form-horizontal" role="form">
          <div class="form-group">
            <label class="col-md-6 control-label">Gesamtpunktzahl</label>
            <div class="col-md-6">
              <p class="form-control-static"><%= _.str.numberFormat(score, 0, ',', '.') %></p>
            </div>
          </div>
          <div class="form-group">
            <label class="col-md-6 control-label">Gespielt</label>
            <div class="col-md-6">
              <p class="form-control-static"><%= gameCnt %> <% if(gameCnt != 1) { %>Spiele<%} else {%>Spiel<%} %> <small class="text-muted">(Ø ~<%= _.str.numberFormat(score/gameCnt, 0, ',', '.') %>)</small></p>
            </div>
          </div>
        </form>
      </div>
      <table class="table table-hover table-striped">
        <thead>
          <th>Kartensatz</th>
          <th>Dein Highscore</th>
          <th>Pos.</th>
          <th>Highscore</th>
        </thead>
        <tbody>
          <% 
            if(games.length > 0) {
              _.each(games, function(game){
          %>
                <tr><td><a href="#set/details/<%= game.setName %>/<%= game.setId %>" class="set-link" data-set-id="<%= game.setId %>"><%= game.setName %></a></td><td><%= _.str.numberFormat(game.personalHighscore, 0, ',', '.') %></td><td><%= game.position %></td><td><%= _.str.numberFormat(game.overallHighscore, 0, ',', '.') %></td></tr>
          <%
              })
            } else {
          %>
                <tr><td colspan="4" align="center"><p class="text-muted" style="margin-top:10px; font-style:italic">Du hast bisher noch kein Spiel gespielt</p></td>
          <%  } %>
        </tbody>
      </table>
    </script>

    <script type="text/template" id="profile-badge-list">
      <div class="panel-heading">
        <h3 class="panel-title">Badges</h3>
      </div>
      <div class="panel-body">
      <p class="pull-left; width:50%">Du hast die Möglichkeit, deine gesammelten Badges mit dem Mozilla Badge Backpack synchronisieren. Um deine Badges der <a href="http://openbadges.org/" target="_blank">OpenBadges Plattform</a> hinzuzufügen, klicke auf den folgenden Button:</p><p class="pull-right; width:50%" ><a class="btn btn-default issueBadge"><img src="http://openbadges.org/wp-content/uploads/2013/02/OpenBadges_Insignia_EarnOur.png" /></a></p>
      </div>
        <table class="table table-striped table-bordered table-hover">
          <thead>
            <tr>
              <th>Badge</th>
              <th>Beschreibung</th>
              <th width="300">Fortschritt</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
    </script>

    <script type="text/template" id="profile-badge-item">
      <td align="center"><strong><%= name %></strong><br /><br />
      <img src="/badges/<%= _id %>_3.png" width="30" height="30" />
      <img src="/badges/<%= _id %>_2.png" width="30" height="30" />
      <img src="/badges/<%= _id %>_1.png" width="60" />
      </td>
      <td><p style="margin:5px 0 15px 0"><%= description %></p>

      <table class="table table-bordered" style="margin-bottom:0; position:relative; bottom:5px">
        <tbody>
        <tr><td class="active"><strong>Gold</strong></td><td><%= rank["1"] %> <%= unit %></td><td class="active"><strong>Silber</strong></td><td><%= rank["2"] %> <%= unit %></td><td class="active"><strong>Bronze</strong></td><td><%= rank["3"] %> <%= unit %></td></tr>
        </tbody>
      </table>
      </td>
      <td >
      <%
        if(typeof(user) != "undefined") {
      %>
        <div style="float:left; width:75px; height:75px; margin-right:10px;">
        <img src="/badges/<%= _id %>_<%= user.rank %><% if(user.issuedOn == 0) { %>_gray<% } %>.png" alt="<%= name %>" width="75" height="75" />
        </div>
        <div>
        <p>
          <strong><%= name %> 
          <% if(user.rank == 3) { %> (Bronze) <% } %>
          <% if(user.rank == 2) { %> (Silber) <% } %>
          <% if(user.rank == 1) { %> (Gold) <% } %>
          </strong><br />
          <small>
          <% if(user.issuedOn > 0) { %>
            Erhalten am <%= new Date(user.issuedOn*1000).format('d.m.y')  %></small>
          <% } else { %>
            Mach´ weiter und sammel diesen Bronze-Badge:
          <% } %>
        </p>

        <div class="progress">
          <div class="progress-bar" role="progressbar" aria-valuenow="<%= user.progress/user.nextRank*100 %>" aria-valuemin="0" aria-valuemax="100" style="width: <%= user.progress/user.nextRank*100 %>%">
          </div>
          </div>
        </div>
      <%
        }
      %>
      </td>
    </script>

    <script type="text/template" id="profile-set-list">
      <div class="panel-heading">
        <h3 class="panel-title">Kartensätze</h3>
      </div> 
        <table class="table table-striped table-bordered table-hover">
          <thead>
            <tr>
              <th width="300">Name</th>
              <th width="150">Kategorie</th>
              <th>Beschreibung</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
    </script>

    <script type="text/template" id="profile-set-item">
      <td><a href="#set/details/<%= name.replace(/[^a-zA-Z0-9-_]/g, '_') %>/<%= _id %>/"><%= name %></a> <span class="badge pull-right"><%= cardCnt %></span></td>
      <td><%= _.escape(category) %></td>
      <td><%= _.escape(description) %></td>
    </script>

    <script type="text/javascript" src="/javascripts/lib/jquery.min.js"></script>
    <script type="text/javascript" src="/javascripts/lib/underscore-min.js"></script>    
    <script type="text/javascript" src="/javascripts/lib/underscore.string.min.js"></script>
    <script type="text/javascript"> _.mixin(_.str.exports()) </script>
    <script type="text/javascript" src="/javascripts/lib/backbone-min.js"></script>
    <script type="text/javascript" src="/javascripts/lib/backbone.marionette.min.js"></script>
    <script type="text/javascript" src="/javascripts/lib/modernizr.min.js"></script>
    <script type="text/javascript" src="/javascripts/lib/socket.io.min.js"></script>
    <script type="text/javascript" src="javascripts/lib/jquery.pause.min.js"></script>

    <script type="text/javascript" src="/javascripts/lib/jquery-ui.min.js"></script>
    <script type="text/javascript" src="/javascripts/lib/bootstrap.min.js"></script>
    <script type="text/javascript" src="/javascripts/lib/typeahead.min.js"></script>

    <script type="text/javascript" src="/javascripts/Cards.js"></script>
    
    <script type="text/javascript" src="/javascripts/entities/Set.js"></script>
    <script type="text/javascript" src="/javascripts/entities/Card.js"></script>
    <script type="text/javascript" src="/javascripts/entities/User.js"></script>
    <script type="text/javascript" src="/javascripts/entities/Personalcard.js"></script>
    <script type="text/javascript" src="/javascripts/entities/Category.js"></script>
    <script type="text/javascript" src="/javascripts/entities/Score.js"></script>
    <script type="text/javascript" src="/javascripts/entities/Rating.js"></script>
    <script type="text/javascript" src="/javascripts/entities/Badge.js"></script>

    <script type="text/javascript" src="/javascripts/modules/Pool.Controller.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Pool.CategoryView.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Pool.CategorySetView.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Pool.Layout.js"></script>

    <script type="text/javascript" src="/javascripts/modules/Set.List.ListView.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Set.List.SideBar.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Set.Controller.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Set.List.Layout.js"></script>

    <script type="text/javascript" src="/javascripts/modules/Set.Details.Layout.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Set.Details.SideBar.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Set.Details.DetailsView.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Set.Details.NewCardView.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Set.Details.EditCardView.js"></script>

    <script type="text/javascript" src="/javascripts/modules/Set.Rating.RatingView.js"></script>

    <script type="text/javascript" src="/javascripts/modules/Set.Learn.Layout.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Set.Learn.SideBar.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Set.Learn.DetailsView.js"></script>

    <script type="text/javascript" src="/javascripts/modules/Set.Memo.Layout.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Set.Memo.SideBar.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Set.Memo.DetailsView.js"></script>

    <script type="text/javascript" src="/javascripts/modules/Profile.Layout.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Profile.Controller.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Profile.InfoView.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Profile.ScoreView.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Profile.XpView.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Profile.BadgeView.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Profile.SetView.js"></script>

    <script type="text/javascript" src="/javascripts/modules/Game.Meteor.Layout.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Game.Controller.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Game.Meteor.SideBar.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Game.Meteor.PitchView.js"></script>

    <script type="text/javascript" src="/javascripts/lib/jquery.cookie.min.js"></script>
    <script type="text/javascript" src="/javascripts/lib/Date.format.min.js"></script>

    <script type="text/javascript" src="/javascripts/lib/wysihtml5-0.3.0.min.js"></script>
    <script type="text/javascript" src="/javascripts/lib/bootstrap-wysihtml5.js"></script>
    <script type="text/javascript" src="/javascripts/lib/jquery.raty.min.js"></script>
    <script type="text/javascript" src="/javascripts/lib/jquery.clickout.js"></script>

    <script src="https://backpack.openbadges.org/issuer.js"></script>

    <script type="text/javascript" src="https://www.google.com/jsapi"></script>

    <script type="text/javascript">
      $(function(){
        Cards.start();
      })

      var socket = io.connect('http://localhost:3000');
      socket.on('set', function (data) {
        console.log(data);
      });
      socket.on('badge', function (badge) {
        console.log("badge", badge);
        $("#notificationContainer .badgeTitle").text(badge.title);
        var rank = new Array("Gold", "Silber", "Bronze");

        $("#notificationContainer span.rank").text(rank[badge.rank-1]);
        $("#notificationContainer img").attr('src', '/badges/'+badge.badge+'_'+badge.rank+'.png');
        $("#notificationContainer").fadeIn();

        $("#notificationContainer button.close").click(function(ev){
          console.log("close");
          $("#notificationContainer").fadeOut();
        });
      });


    </script>
    <div id="notificationContainer" style="padding:10px 15px 15px; position: absolute; display:none; width:350px; right: 10px; top: 10px; z-index: 10000; opacity: 0.9; border:1px solid #777; background-color:#fff; border-radius:5px">
      <button type="button" class="close" aria-hidden="true" style="float:right">&times;</button>
      <div style="float:left; margin-right:20px;">
        <img src="/badges/badge/stammgast_3.png" alt="<%= name %>" width="75" height="75" style="margin-top:5px; display:inline-block" />
      </div>
      <div>
          <h4>Neuer Badge</h4>
          Du hast den Badge <strong class="badgeTitle">Stammgast</strong> <strong>(<span class="rank"></span>)</strong> erhalten
      </div>
    </div>
  </body>
</html>